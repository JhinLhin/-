# EC2ï¼šVirtual Machines

## 1) æœ¬ç« ä½ å¿…é¡»ä¼šçš„â€œä¸€å¥è¯å®šä¹‰â€

- **EC2**ï¼šAWS ä¸Šçš„â€œäº‘ç«¯è™šæ‹Ÿæœºâ€ï¼ˆVirtual Machineï¼‰ï¼Œä½ ç§Ÿ CPU/RAM/ç½‘ç»œ/ç£ç›˜æ¥è·‘ç¨‹åºã€‚
- **AMI**ï¼šEC2 çš„â€œç³»ç»Ÿé•œåƒâ€ï¼ˆOS + é¢„è£…è½¯ä»¶/é…ç½®æ¨¡æ¿ï¼‰ã€‚
- **Security Groupï¼ˆSGï¼‰**ï¼šæŒ‚åœ¨ EC2 ä¸Šçš„**è™šæ‹Ÿé˜²ç«å¢™**ï¼Œæ§åˆ¶**è¿›/å‡º**æµé‡ã€‚
- **User Data**ï¼šEC2 ç¬¬ä¸€æ¬¡å¼€æœºæ—¶è‡ªåŠ¨æ‰§è¡Œçš„åˆå§‹åŒ–è„šæœ¬ï¼ˆbootstrapï¼‰ã€‚

------

## 2) è€ƒè¯•å¿…èƒŒå…³é”®è¯æ¸…å•ï¼ˆèƒŒè¿™ä¸ªå°±å¤Ÿï¼‰

- EC2 = VMï¼›AMIï¼›Instance Typeï¼›EBS vs Instance Store
- **User Dataï¼šåªåœ¨ first boot è·‘ä¸€æ¬¡**ï¼ˆé»˜è®¤ï¼‰
- **Security Groupï¼šstatefulï¼ˆæœ‰çŠ¶æ€ï¼‰**ï¼›é»˜è®¤ **inbound å…¨æ‹’**ã€**outbound å…¨æ”¾**
- å¸¸è§ç«¯å£ï¼š**22 SSH / 80 HTTP / 443 HTTPS / 3389 RDP**
- è´­ä¹°æ¨¡å¼ï¼š**On-Demand / Reserved Instances / Savings Plans / Spot / Dedicated Host / Dedicated Instance / Capacity Reservation**
- **Shared Responsibilityï¼ˆEC2ï¼‰**ï¼šAWS è´Ÿè´£äº‘åº•å±‚ï¼›ä½ è´Ÿè´£ OS/åº”ç”¨/é…ç½®/æ•°æ®

------

## 3) EC2 é…ç½®ç»´åº¦ï¼ˆCCP å¸¸è€ƒâ€œç»„æˆé¢˜â€ï¼‰

ä½ çœ‹åˆ°é¢˜ç›®é—®â€œå¯åŠ¨ä¸€å° EC2 éœ€è¦ä»€ä¹ˆ/ç”±ä»€ä¹ˆæ„æˆâ€ï¼Œç›´æ¥èƒŒè¿™å¥ï¼š

> **EC2 Instance = AMIï¼ˆOSï¼‰ + Instance Typeï¼ˆCPU/RAMï¼‰ + Storageï¼ˆEBS/Instance Storeï¼‰ + Networkï¼ˆVPC/Subnetï¼‰ + Security Group +ï¼ˆå¯é€‰ï¼‰User Data**

å†åŠ ä¸¤å—å¸¸è§èƒ½åŠ›ï¼š

- **ELB**ï¼šæŠŠæµé‡åˆ†ç»™å¤šå° EC2ï¼ˆæé«˜å¯ç”¨æ€§ï¼‰
- **Auto Scaling**ï¼šè‡ªåŠ¨åŠ /å‡ EC2 æ•°é‡ï¼ˆåº”å¯¹æµé‡æ³¢åŠ¨ï¼‰

------

## 4) Instance Typesï¼ˆåªæŒ‰â€œè€ƒè¯•ä¼šæ€ä¹ˆé—®â€è®°ï¼‰

### 4.1 å››å¤§ç±» = çœ‹ç“¶é¢ˆé€‰èµ„æº

- **General Purposeï¼ˆé€šç”¨ï¼‰**ï¼šå‡è¡¡ï¼ˆWeb/å°å‹DB/å¼€å‘æµ‹è¯•ï¼‰
- **Compute Optimizedï¼ˆè®¡ç®—ï¼‰**ï¼šCPU å¼ºï¼ˆæ‰¹å¤„ç†/é«˜æ€§èƒ½Web/åˆ†æ/ML inferenceï¼‰
- **Memory Optimizedï¼ˆå†…å­˜ï¼‰**ï¼šRAM å¤§ï¼ˆå†…å­˜æ•°æ®åº“/ç¼“å­˜/å®æ—¶åˆ†æï¼‰
- **Storage Optimizedï¼ˆå­˜å‚¨ï¼‰**ï¼šé«˜ IOPS/æœ¬åœ°ç›˜ï¼ˆNoSQL/æ•°æ®ä»“åº“/å¤§æ•°æ®ï¼‰

### 4.2 è€ƒè¯•å¿«é€Ÿé€‰å‹å£è¯€

- **CPU ä¸å¤Ÿ â†’ Compute**
- **å†…å­˜ä¸å¤Ÿ â†’ Memory**
- **ç£ç›˜åå/IO ä¸å¤Ÿ â†’ Storage**
- **éƒ½å·®ä¸å¤š â†’ General**

> CCP ä¸ä¼šè®©ä½ èƒŒå…·ä½“å‹å·å‚æ•°ï¼ˆm5/c5/r5/i3ï¼‰ï¼Œä¸»è¦è€ƒâ€œå“ªç±»é€‚åˆå“ªç§åœºæ™¯â€ã€‚

------

## 5) EBS vs Instance Storeï¼ˆé«˜é¢‘æ˜“æ··æ·†ï¼‰

- **EBSï¼ˆElastic Block Storeï¼‰**ï¼š**æŒä¹…åŒ–**å—å­˜å‚¨ï¼ˆåƒç¡¬ç›˜ï¼‰ï¼Œå®ä¾‹åœäº†æ•°æ®è¿˜åœ¨ï¼ˆå–å†³äºè®¾ç½®ï¼‰ï¼Œå¸¸ç”¨ä¸”å®‰å…¨ã€‚
- **Instance Store**ï¼š**ä¸´æ—¶**æœ¬åœ°ç›˜ï¼Œ**å®ä¾‹åœæ­¢/ç»ˆæ­¢å°±å¯èƒ½ä¸¢æ•°æ®**ï¼ˆé€‚åˆç¼“å­˜/ä¸´æ—¶æ–‡ä»¶/ä¸­é—´ç»“æœï¼‰ã€‚

**ç§’é€‰é¢˜å¹²å…³é”®è¯**

- â€œéœ€è¦æŒä¹…åŒ–/ä¸ä¸¢æ•°æ®â€â†’ **EBS**
- â€œä¸´æ—¶ç¼“å­˜/å¯ä¸¢/æé«˜æœ¬åœ°IOâ€â†’ **Instance Store**

------

## 6) User Dataï¼ˆCCP æœ€çˆ±è€ƒçš„ç»†èŠ‚ï¼‰

ä½ è¦è®°ä½ 3 ç‚¹ï¼š

1. **åœ¨ Launch æ—¶æä¾›**
2. **åªåœ¨é¦–æ¬¡å¯åŠ¨ï¼ˆfirst bootï¼‰æ‰§è¡Œä¸€æ¬¡ï¼ˆé»˜è®¤ï¼‰**
3. ç”¨äº **bootstrap**ï¼šè£…è½¯ä»¶ã€æ‹‰é…ç½®ã€å¯åŠ¨æœåŠ¡
   - ä¾‹å¦‚å®‰è£… Apacheã€ä» S3 ä¸‹è½½é…ç½®ã€å¯åŠ¨åº”ç”¨ç­‰

**å¸¸è§é™·é˜±**

- ä¸æ˜¯æ¯æ¬¡ reboot éƒ½è·‘ï¼ˆé¢˜ç›®å¦‚æœæš—ç¤ºâ€œæ¯æ¬¡å¯åŠ¨éƒ½è·‘â€è¦å°å¿ƒï¼‰

------

## 7) Security Groupsï¼ˆå¿…è€ƒæ ¸å¿ƒï¼šè§„åˆ™ + é»˜è®¤è¡Œä¸ºï¼‰

### 7.1 SG çš„å…³é”®äº‹å®ï¼ˆè€ƒè¯•ç›´æ¥é—®ï¼‰

- SG ä½œç”¨åœ¨ **å®ä¾‹çº§åˆ«ï¼ˆinstance-levelï¼‰**
- **é»˜è®¤**ï¼šinbound å…¨æ‹’ï¼›outbound å…¨æ”¾
- è§„åˆ™å¯éšæ—¶æ”¹ï¼Œç«‹å³ç”Ÿæ•ˆ
- ä¸€ä¸ªå®ä¾‹å¯ä»¥æŒ‚å¤šä¸ª SG
- è§„åˆ™æŒ‰ï¼šåè®®ï¼ˆTCP/UDP/ICMPï¼‰+ ç«¯å£ + source/destinationï¼ˆIP/CIDR æˆ–å…¶ä»– SGï¼‰

> CCP å¸¸è€ƒâ€œå“ªä¸ªç»„ä»¶åƒé˜²ç«å¢™ï¼Ÿâ€â†’ **Security Group**

### 7.2 Classic Portsï¼ˆè§åˆ°å°±ç§’é€‰ï¼‰

- **22** SSHï¼ˆè¿œç¨‹ç™»å½• Linuxï¼‰
- **3389** RDPï¼ˆè¿œç¨‹æ¡Œé¢ Windowsï¼‰
- **80** HTTP
- **443** HTTPS
- ï¼ˆ20/21 FTPï¼šäº†è§£å³å¯ï¼‰

### 7.3 æœ€å°æƒé™ï¼ˆbest practiceï¼‰

- åªå¼€å¿…è¦ç«¯å£
- SSH ä¸è¦å¯¹ 0.0.0.0/0 å…¨å¼€ï¼ˆé¢˜ç›®é—®å®‰å…¨åšæ³• â†’ é™åˆ¶åˆ°ä½ çš„ IP æ®µï¼‰

------

## 8) EC2 è´­ä¹°/è®¡è´¹æ¨¡å¼ï¼ˆCCP è¶…é«˜é¢‘ï¼šé€‰æœ€åˆé€‚ï¼‰

ä¸‹é¢æ˜¯ä½ è€ƒè¯•çœŸæ­£è¦ä¼šçš„ï¼š**çœ‹åˆ°åœºæ™¯é€‰å“ªç§**ã€‚

### 8.1 On-Demandï¼ˆéšç”¨éšä»˜ï¼‰

- **ä¸æ‰¿è¯º**ã€çµæ´»ã€å•ä»·æœ€é«˜
- é€‚åˆï¼šçŸ­æœŸã€ä¸å¯é¢„æµ‹ã€ä¸´æ—¶é¡¹ç›®/æµ‹è¯•/çªå‘æµé‡

### 8.2 Reserved Instancesï¼ˆRIï¼šæŒ‰â€œå…·ä½“å®ä¾‹å±æ€§â€çœé’±ï¼‰

- 1/3 å¹´ï¼›æŠ˜æ‰£å¤§ï¼ˆå¯åˆ° ~72%ï¼‰
- é€‚åˆï¼š**é•¿æœŸç¨³å®š**ï¼ˆä¾‹å¦‚é•¿æœŸè·‘çš„æ•°æ®åº“/ç¨³å®šä¸šåŠ¡ï¼‰
- **Convertible RI**ï¼šæ›´çµæ´»ï¼ˆå¯æ¢ç±»å‹/å®¶æ—/OS ç­‰ï¼‰ï¼ŒæŠ˜æ‰£ç•¥ä½

### 8.3 Savings Plansï¼ˆæŒ‰â€œä½¿ç”¨é¢åº¦â€æ‰¿è¯ºçœé’±ï¼‰

- æ‰¿è¯ºæ¯å°æ—¶èŠ±å¤šå°‘é’±ï¼ˆä¾‹å¦‚ $10/hourï¼Œ1/3å¹´ï¼‰
- ç›¸æ¯” RIï¼šæ›´â€œæŒ‰ç”¨é‡æ‰¿è¯ºâ€ï¼Œé€šå¸¸æ›´çµæ´»ï¼ˆå°¤å…¶åœ¨å®ä¾‹å¤§å°/OS/tenancy ç­‰ç»´åº¦ï¼‰
- é€‚åˆï¼šé•¿æœŸç¨³å®šä½†å¯èƒ½ä¼šæ¢å®ä¾‹è§„æ ¼çš„å›¢é˜Ÿ

> **CCP å¿«é€Ÿå¯¹æ¯”è®°å¿†**ï¼š
> RI = â€œé”å®šæŸäº›å®ä¾‹å±æ€§çœé’±â€ï¼›Savings Plan = â€œé”å®šèŠ±è´¹é¢åº¦çœé’±â€ã€‚

### 8.4 Spotï¼ˆæœ€ä¾¿å®œä½†ä¼šè¢«ä¸­æ–­ï¼‰

- æŠ˜æ‰£æœ€é«˜ï¼ˆå¯åˆ° ~90%ï¼‰ï¼Œä½†**éšæ—¶å¯èƒ½è¢«å›æ”¶**
- é€‚åˆï¼šå¯ä¸­æ–­/å¯é‡è¯•ï¼šæ‰¹å¤„ç†ã€ç¦»çº¿åˆ†æã€æ¸²æŸ“ã€åˆ†å¸ƒå¼ä»»åŠ¡
- ä¸é€‚åˆï¼šå…³é”®åœ¨çº¿æœåŠ¡ã€æ•°æ®åº“

### 8.5 Dedicated Host vs Dedicated Instanceï¼ˆåªè¦æŒæ¡å·®å¼‚ç‚¹ï¼‰

- **Dedicated Host**ï¼šæ•´å°ç‰©ç†æœºç»™ä½ ç”¨ï¼Œå¯æ§æ”¾ç½®ï¼Œé€‚åˆ**åˆè§„/è®¸å¯è¯ BYOLï¼ˆæŒ‰æ’æ§½/æ ¸å¿ƒè®¡è´¹ï¼‰**ï¼Œæœ€è´µ
- **Dedicated Instance**ï¼šç¡¬ä»¶åªç»™ä½ ï¼Œä½†**ä½ ä¸èƒ½æ§åˆ¶æ”¾ç½®**ï¼Œåœæ­¢å†å¯åŠ¨å¯èƒ½æ¢åˆ°æ–°ç¡¬ä»¶

### 8.6 Capacity Reservationï¼ˆé”â€œå®¹é‡â€ï¼Œä¸é”æŠ˜æ‰£ï¼‰

- åœ¨æŸä¸ª AZ **é¢„ç•™ On-Demand å®¹é‡**ï¼Œä¿è¯ä½ è¦ç”¨æ—¶ä¸€å®šæœ‰æœºå™¨
- **æ²¡æŠ˜æ‰£**ï¼ˆä»æŒ‰ On-Demandï¼‰ï¼Œå³ä½¿ä¸å¼€æœºä¹Ÿå¯èƒ½è¦ä»˜ï¼ˆé¢˜ç›®å¸¸è¿™æ ·è€ƒï¼‰
- é€‚åˆï¼šå¿…é¡»åœ¨ç‰¹å®š AZã€çŸ­æœŸä½†ä¸èƒ½æ–­ä¾›çš„åœºæ™¯

------

## 9) ä¸€é¡µâ€œåœºæ™¯é¢˜ç§’é€‰è¡¨â€ï¼ˆè€ƒå‰èƒŒå®ƒï¼‰

| é¢˜å¹²å…³é”®è¯                              | ç§’é€‰ç­”æ¡ˆ                               |
| --------------------------------------- | -------------------------------------- |
| çŸ­æœŸ / ä¸å¯é¢„æµ‹ / ä¸´æ—¶æµ‹è¯•              | **On-Demand**                          |
| é•¿æœŸç¨³å®šï¼ˆ1-3 å¹´ï¼‰æœ€çœé’±                | **Reserved Instances / Savings Plans** |
| é•¿æœŸç¨³å®šä½†å¯èƒ½æ¢è§„æ ¼                    | **Savings Plans**ï¼ˆæ›´çµæ´»ï¼‰            |
| è¶…ä¾¿å®œ + å¯ä¸­æ–­/å¯é‡è¯•                  | **Spot**                               |
| åˆè§„ + è‡ªå¸¦è®¸å¯è¯ BYOL + éœ€è¦ç‰©ç†æœºæ§åˆ¶ | **Dedicated Host**                     |
| ç¡¬ä»¶ç‹¬å ä½†ä¸å…³å¿ƒç‰©ç†æ”¾ç½®                | **Dedicated Instance**                 |
| å¿…é¡»ä¿è¯æŸ AZ æœ‰å®¹é‡ï¼ˆä¸ä¸€å®šä¾¿å®œï¼‰      | **Capacity Reservation**               |

------

## 10) Shared Responsibilityï¼ˆEC2 å¿…è€ƒï¼‰

### AWS è´Ÿè´£

- æ•°æ®ä¸­å¿ƒã€ç‰©ç†å®‰å…¨ã€åº•å±‚ç¡¬ä»¶ã€è™šæ‹ŸåŒ–å±‚ã€ç½‘ç»œåŸºç¡€è®¾æ–½ç­‰

### ä½ è´Ÿè´£

- **EC2 é‡Œçš„ OSï¼ˆæ‰“è¡¥ä¸ï¼‰ã€è½¯ä»¶å®‰è£…ã€åº”ç”¨å®‰å…¨é…ç½®**
- **Security Group / VPC ç½‘ç»œé…ç½®**
- æ•°æ®ä¸æƒé™ï¼ˆIAMã€åŠ å¯†ã€è®¿é—®æ§åˆ¶ï¼‰

**ä¸€å¥è¯èƒŒè¯µç‰ˆ**

> AWS è´Ÿè´£â€œäº‘çš„å®‰å…¨â€ï¼Œä½ è´Ÿè´£â€œäº‘é‡Œä½ è·‘çš„ä¸œè¥¿çš„å®‰å…¨â€ã€‚

------

## æœ¬ç« è€ƒå‰ 10 åˆ†é’Ÿé€Ÿè®°å¡ç‰‡ï¼ˆç›´æ¥èƒŒï¼‰

- EC2 = äº‘ VMï¼›AMI = ç³»ç»Ÿé•œåƒ
- Instance Typeï¼šGeneral/Compute/Memory/Storageï¼ˆæŒ‰ç“¶é¢ˆé€‰ï¼‰
- EBS æŒä¹…ï¼›Instance Store ä¸´æ—¶
- User Dataï¼šlaunch æä¾›ï¼›**first boot åªè·‘ä¸€æ¬¡**ï¼›ç”¨æ¥ bootstrap
- Security Groupï¼šå®ä¾‹çº§é˜²ç«å¢™ï¼›é»˜è®¤ inbound æ‹’ã€outbound æ”¾ï¼›å¸¸è§ç«¯å£ 22/80/443/3389
- è´­ä¹°ï¼šOn-Demand çµæ´»ï¼›RI/Plans é•¿æœŸçœï¼›Spot æœ€ä¾¿å®œä½†ä¼šæ–­ï¼›Dedicated Host åˆè§„+BYOLï¼›Capacity Reservation ä¿è¯ AZ å®¹é‡ä¸æ‰“æŠ˜
- Shared Responsibilityï¼šAWS ç®¡åº•å±‚ï¼›ä½ ç®¡ OS/åº”ç”¨/é…ç½®/æ•°æ®/SG

------

# EC2 Instance Storage

## 1) ä¸€å¥è¯æŠŠæ¯ä¸ªä¸œè¥¿é’‰æ­»ï¼ˆè€ƒè¯•æœ€å¸¸é—®çš„â€œä½ åˆ°åº•ç”¨å“ªä¸ªâ€ï¼‰

- **EBS**ï¼šç»™**ä¸€å° EC2**ç”¨çš„**æŒä¹…åŒ–å—å­˜å‚¨**ï¼ˆåƒäº‘ç¡¬ç›˜ï¼‰ï¼Œ**åŒä¸€æ—¶é—´åªèƒ½æŒ‚ä¸€å°**ï¼Œ**ç»‘å®šæŸä¸ª AZ**ã€‚
- **EFS**ï¼šç»™**å¾ˆå¤šå° EC2 åŒæ—¶æŒ‚è½½**çš„**å…±äº«æ–‡ä»¶ç³»ç»Ÿ**ï¼ˆNFSï¼‰ï¼Œå¯è·¨ AZï¼Œé«˜å¯ç”¨ã€‚
- **FSx**ï¼šAWS æ‰˜ç®¡çš„â€œä¸“ä¸šæ–‡ä»¶ç³»ç»Ÿâ€ï¼ˆWindows/é«˜æ€§èƒ½ HPC ç­‰ï¼‰ï¼ŒæŒ‰åœºæ™¯é€‰ã€‚
- **Instance Store**ï¼šEC2 çš„**æœ¬åœ°ä¸´æ—¶ç›˜**ï¼ˆephemeralï¼‰ï¼Œ**åœæœº/æ•…éšœå¯èƒ½ä¸¢æ•°æ®**ï¼Œæ€§èƒ½å¾ˆå¼ºä½†ä¸æŒä¹…ã€‚
- **Snapshotï¼ˆEBSï¼‰**ï¼šEBS çš„â€œæ—¶é—´ç‚¹å¤‡ä»½â€ï¼Œ**å¢é‡**ï¼Œå¯å¤åˆ¶åˆ°å…¶ä»– Region/Accountã€‚
- **AMI**ï¼šEC2 çš„â€œé•œåƒæ¨¡æ¿â€ï¼ˆOS + è½¯ä»¶ + é…ç½®ï¼‰ï¼Œç”¨äºå¿«é€Ÿå¤åˆ¶ä¸€æ¨¡ä¸€æ ·çš„æœºå™¨ã€‚
- **EC2 Image Builder**ï¼šè‡ªåŠ¨åŒ–ã€å¯å®šæ—¶åœ°äº§ç”Ÿ/æ›´æ–° AMIï¼ˆæ›´åˆè§„ã€æ›´å®‰å…¨ï¼‰ã€‚

------

## 2) å¿…èƒŒå…³é”®è¯ï¼ˆèƒŒè¿™å¥—å°±èƒ½åšé¢˜ï¼‰

- **EBSï¼šblock / persistent / one instance at a time / AZ-bound / Delete on Termination**
- **EBS Snapshotï¼špoint-in-time / incremental / stored in S3 / copyè·¨Region/Account / DLMè‡ªåŠ¨åŒ– / Archive tier / Recycle Bin**
- **EFSï¼šNFS / shared / mount 100s EC2 / multi-AZ**
- **EFS-IAï¼šä¸å¸¸è®¿é—®æ›´ä¾¿å®œï¼ˆæŒ‰ç­–ç•¥è‡ªåŠ¨è½¬ï¼‰**
- **FSx Windowsï¼šSMB + NTFS + Active Directory**
- **FSx Lustreï¼šHPC/ML/è¶…é«˜ååä½å»¶è¿Ÿ**
- **Instance Storeï¼šephemeral / high IOPS / lost on stop/terminate / you manage backups**
- **Shared Responsibilityï¼ˆå­˜å‚¨ï¼‰ï¼šAWS è´Ÿè´£ durability/ç¡¬ä»¶ï¼›ä½ è´Ÿè´£æ•°æ®å¤‡ä»½ã€æƒé™ã€åŠ å¯†ç­–ç•¥ä½¿ç”¨**

------

## 3) ä¸€å¼ â€œç§’é€‰è¡¨â€ï¼šé¢˜å¹²ä¸€å‡ºç°å°±é€‰è°

| é¢˜å¹²å…³é”®è¯                                            | ç§’é€‰                        |
| ----------------------------------------------------- | --------------------------- |
| â€œéœ€è¦åƒç¡¬ç›˜ä¸€æ ·çš„å—å­˜å‚¨â€â€œæ•°æ®åº“ç£ç›˜â€â€œå•å°EC2æŒä¹…åŒ–â€   | **EBS**                     |
| â€œå¾ˆå¤šå° EC2 åŒæ—¶è¯»å†™åŒä¸€ä»½æ–‡ä»¶â€â€œå…±äº«ç›®å½•â€â€œNFSâ€        | **EFS**                     |
| â€œWindows æ–‡ä»¶å…±äº«â€â€œSMB/NTFSâ€â€œActive Directoryâ€        | **FSx for Windows**         |
| â€œHPC/æœºå™¨å­¦ä¹ è®­ç»ƒ/è§†é¢‘å¤„ç†â€â€œæé«˜åå/ç™¾ä¸‡IOPS/äºšæ¯«ç§’â€ | **FSx for Lustre**          |
| â€œç¼“å­˜/ä¸´æ—¶æ–‡ä»¶/ä¸­é—´ç»“æœâ€â€œé«˜IOä½†èƒ½ä¸¢â€                  | **Instance Store**          |
| â€œå¤‡ä»½ EBSâ€â€œæ¢å¤åˆ°æŸä¸ªæ—¶é—´ç‚¹â€â€œè·¨Regionè¿ç§»â€            | **EBS Snapshot**            |
| â€œå¿«é€Ÿå¤åˆ¶ä¸€æ¨¡ä¸€æ ·çš„ EC2 ç¯å¢ƒ/é¢„è£…è½¯ä»¶â€                | **AMIï¼ˆæˆ– Image Builderï¼‰** |

------

## 4) EBSï¼ˆCCP å¿…è€ƒç‚¹ï¼‰

### 4.1 EBS æœ¬è´¨ï¼ˆä¸€å®šè¦è®°ï¼‰

- **ç½‘ç»œæŒ‚è½½çš„ block storage**
- **æŒä¹…åŒ–**ï¼šå®ä¾‹ç»ˆæ­¢åä»å¯ä¿ç•™æ•°æ®ï¼ˆå–å†³äºåˆ é™¤ç­–ç•¥ï¼‰
- **åŒä¸€æ—¶é—´åªèƒ½æŒ‚ä¸€å° EC2**
- **ç»‘å®šä¸€ä¸ª AZ**ï¼ˆæƒ³è·¨ AZ â†’ é€šå¸¸ç”¨ snapshot/å¤åˆ¶æ¥åšï¼‰
- åœ¨åŒä¸€ AZ å†…ä¼šåšå¤åˆ¶ä»¥æå‡è€ä¹…æ€§ï¼ˆä½ ä¸éœ€è¦è‡ªå·±ç®¡ç¡¬ä»¶ï¼‰

### 4.2 Delete on Terminationï¼ˆè¶…çº§çˆ±è€ƒï¼‰

- **é»˜è®¤ï¼šRoot volumeï¼ˆç³»ç»Ÿç›˜ï¼‰ä¼šè¢«åˆ **
- **é»˜è®¤ï¼šé¢å¤–æŒ‚è½½çš„æ•°æ®ç›˜ä¸ä¼šè¢«åˆ **
- æƒ³â€œå®ä¾‹åˆ äº†ä½†æ•°æ®è¦ç•™â€ â†’ å…³æ‰ root çš„ delete-on-termination æˆ–æŠŠæ•°æ®æ”¾åˆ°é root EBS

### 4.3 Snapshotï¼ˆEBS å¤‡ä»½ï¼‰

- **Point-in-time** å¤‡ä»½
- **Incremental**ï¼šåªä¿å­˜å˜åŒ–å—ï¼ˆçœç©ºé—´/çœé’±ï¼‰
- å­˜åœ¨ â€œS3 ä¸Šâ€ï¼ˆä½ ä¸ç”¨è‡ªå·±æ“ä½œ S3ï¼Œä½†è€ƒè¯•ä¼šè¿™ä¹ˆæè¿°ï¼‰
- **Copy**ï¼šå¯è·¨ Regionã€è·¨ Account
- è‡ªåŠ¨åŒ–ï¼š**DLMï¼ˆData Lifecycle Managerï¼‰**
- **Snapshot Archive**ï¼šæ›´ä¾¿å®œï¼ˆå¯åˆ° 75%ï¼‰ï¼Œä½†**æ¢å¤è¦ 24â€“72 å°æ—¶**ï¼ˆé¢˜ç›®é—®â€œæ¢å¤æ…¢ä½†ä¾¿å®œâ€â†’ è¿™æ¡ï¼‰
- **Recycle Bin**ï¼šè¯¯åˆ å¿«æ•‘å‘½ï¼ˆè®¾ç½® 1 å¤©ï½1 å¹´ä¿ç•™ï¼‰

------

## 5) EFSï¼ˆå…±äº«æ–‡ä»¶ç³»ç»Ÿï¼šNFSï¼‰

- **Fully managed NFS**
- **å¯åŒæ—¶æŒ‚è½½åˆ°å¾ˆå¤šå° EC2ï¼ˆ100sï¼‰**
- **è·¨ AZ å¯è®¿é—®**ï¼ˆé«˜å¯ç”¨/é«˜è€ä¹…ï¼‰
- å…¸å‹åœºæ™¯ï¼šå…±äº«ç½‘ç«™å†…å®¹ã€å…±äº«ç”¨æˆ·ä¸Šä¼ ã€å…±äº«é…ç½®/æ—¥å¿—ç›®å½•ï¼ˆå¾ˆå¤šæœºè¦çœ‹åŒä¸€ä»½æ–‡ä»¶ï¼‰

### EFS-IAï¼ˆä¸å¸¸è®¿é—®æ›´çœé’±ï¼‰

- **Infrequent Access**ï¼šç»™â€œå†·æ–‡ä»¶â€æ›´ä¾¿å®œ
- å¯æŒ‰ç­–ç•¥æŠŠ **60 å¤©æœªè®¿é—®**çš„æ–‡ä»¶è‡ªåŠ¨è½¬åˆ° IAï¼ˆé¢˜å¹²å‡ºç°â€œè‡ªåŠ¨è½¬å†·/å¾ˆå°‘è¯»â€â†’ é€‰ EFS-IAï¼‰

------

## 6) FSxï¼ˆâ€œæˆ‘éœ€è¦ç‰¹å®šæ–‡ä»¶ç³»ç»Ÿâ€æ‰ç”¨å®ƒï¼‰

### FSx for Windows File Server

- **SMB + NTFS**
- **Active Directory** é›†æˆ
- é€‚åˆï¼šWindows åº”ç”¨ã€å…±äº«ç›˜ã€ä¼ä¸š AD ç¯å¢ƒ

### FSx for Lustre

- è¶…é«˜æ€§èƒ½æ–‡ä»¶ç³»ç»Ÿï¼ˆHPC/ML/è§†é¢‘å¤„ç†ï¼‰
- å…³é”®è¯ï¼š**é«˜ååã€ç™¾ä¸‡ IOPSã€sub-ms latency**
- é¢˜å¹²å‡ºç°â€œHPC/è®­ç»ƒ/æ¸²æŸ“/è¶…é«˜é€Ÿå…±äº«å­˜å‚¨â€â†’ ä¼˜å…ˆæƒ³åˆ°å®ƒ

------

## 7) EC2 Instance Storeï¼ˆä¸´æ—¶æœ¬åœ°ç›˜ï¼‰

- **ç›´æ¥æŒ‚åœ¨ç‰©ç†æœºä¸Šçš„ä¸´æ—¶ç›˜**
- **æ€§èƒ½éå¸¸å¥½ï¼ˆé«˜ I/Oï¼‰**
- **ä¸æŒä¹…**ï¼šå®ä¾‹ stop/terminate æˆ–ç¡¬ä»¶æ•…éšœå¯èƒ½ä¸¢
- é€‚åˆï¼šcacheã€bufferã€scratchã€ä¸´æ—¶ä¸­é—´ç»“æœ
- **å¤‡ä»½/å¤åˆ¶ä½ è‡ªå·±è´Ÿè´£**ï¼ˆå¸¸è§è€ƒç‚¹ï¼šä¸é€‚åˆå­˜å…³é”®æ•°æ®ï¼‰

------

## 8) Shared Responsibilityï¼ˆEC2 å­˜å‚¨ç‰ˆï¼‰

### AWS è´Ÿè´£

- EBS/EFS çš„åº•å±‚ç¡¬ä»¶ã€è€ä¹…æ€§è®¾è®¡ã€AZ å†…å¤åˆ¶
- æä¾›åŠ å¯†èƒ½åŠ›ï¼ˆæ¯”å¦‚ KMS é›†æˆèƒ½åŠ›ï¼‰

### ä½ è´Ÿè´£

- **ä½ çš„æ•°æ®å¤‡ä»½ç­–ç•¥**ï¼ˆEBS snapshotã€EFS replication/ç­–ç•¥ç­‰ï¼‰
- **è®¿é—®æ§åˆ¶**ï¼ˆIAMã€SG/NACLã€æ–‡ä»¶æƒé™ï¼‰
- **æ˜¯å¦å¯ç”¨/å¦‚ä½•ä½¿ç”¨åŠ å¯†**ï¼ˆæ•æ„Ÿæ•°æ®ä½ è¦ä¸»åŠ¨é…ç½®ï¼‰

------

## 9) AMI & Image Builderï¼ˆè€ƒâ€œé•œåƒæ˜¯ä»€ä¹ˆ/ä¸ºä»€ä¹ˆç”¨â€ï¼‰

### AMIï¼ˆæ˜¯ä»€ä¹ˆ + ä¸ºä»€ä¹ˆï¼‰

- AMI = å¯åŠ¨ EC2 çš„æ¨¡æ¿ï¼ˆOS + è½¯ä»¶ + é…ç½®ï¼‰
- ä»·å€¼ï¼š**å¯åŠ¨æ›´å¿«ã€ç¯å¢ƒä¸€è‡´ã€å¯é‡å¤éƒ¨ç½²**
- **Region çº§**ï¼šAMI é€šå¸¸â€œåœ¨ç‰¹å®š Regionâ€ï¼Œéœ€è¦çš„è¯å¯ copy åˆ°å…¶ä»– Region
- æ¥æºä¸‰ç±»ï¼š
  - Public AMIï¼ˆAWS æä¾›ï¼‰
  - Your AMIï¼ˆä½ è‡ªå·±åšï¼‰
  - Marketplace AMIï¼ˆåˆ«äººåš/å¯èƒ½æ”¶è´¹ï¼‰

### AMI çš„åŸºæœ¬æµç¨‹ï¼ˆé¢˜ç›®ä¼šè€ƒé¡ºåºï¼‰

1. å…ˆæœ‰ä¸€å° EC2
2. è£…è½¯ä»¶/é…ç¯å¢ƒ
3. ä»å®ƒ **Create AMI**
4. ç”¨è¿™ä¸ª AMI å† launch å‡ºä¸€æ¨¡ä¸€æ ·çš„æ–° EC2

### EC2 Image Builder

- ä½œç”¨ï¼š**è‡ªåŠ¨**åˆ›å»º/æ›´æ–° AMIï¼ˆå¯å®šæ—¶ã€å¯åˆè§„ã€å¯æŒç»­æ‰“è¡¥ä¸ï¼‰
- è®¡è´¹ï¼šæœåŠ¡æœ¬èº«å…è´¹ï¼Œä»˜åº•å±‚èµ„æºè´¹ï¼ˆCCP å¸¸è§é—®æ³•ï¼šä¸æ˜¯â€œé¢å¤–æŒ‰æœåŠ¡æ”¶è´¹â€é‚£ç§ï¼‰

------

## æœ¬ç«  10 åˆ†é’Ÿé€Ÿè®°å¡ç‰‡ï¼ˆè€ƒå‰èƒŒï¼‰

- **EBS**ï¼šæŒä¹…åŒ– blockï¼Œ**å•å®ä¾‹**ï¼Œ**ç»‘å®š AZ**ï¼›root é»˜è®¤åˆ ã€æ•°æ®ç›˜é»˜è®¤ä¸åˆ 
- **Snapshot**ï¼šæ—¶é—´ç‚¹ã€**å¢é‡**ã€å¯è·¨ Region/Accountã€DLM è‡ªåŠ¨åŒ–ï¼›Archive ä¾¿å®œä½†æ¢å¤æ…¢ï¼›Recycle Bin é˜²è¯¯åˆ 
- **EFS**ï¼šNFS å…±äº«æ–‡ä»¶ç³»ç»Ÿï¼Œå¯æŒ‚ 100s EC2ï¼Œè·¨ AZï¼›**EFS-IA** å†·æ•°æ®çœé’±
- **FSx Windows**ï¼šSMB/NTFS/ADï¼›**FSx Lustre**ï¼šHPC/ML è¶…é«˜æ€§èƒ½
- **Instance Store**ï¼šæœ¬åœ°ä¸´æ—¶ç›˜ï¼Œé«˜ IO ä½†ä¼šä¸¢ï¼›å…³é”®æ•°æ®åˆ«æ”¾
- **AMI**ï¼šæœºå™¨æ¨¡æ¿ï¼›**Image Builder**ï¼šè‡ªåŠ¨åš/æ›´æ–° AMI
- Shared Responsibilityï¼šAWS ç®¡åº•å±‚è€ä¹…ï¼›ä½ ç®¡å¤‡ä»½/æƒé™/åŠ å¯†ä½¿ç”¨

------

# Elastic Load Balancing & Auto Scaling Groups

## 1) ä¸€å¥è¯æŠŠæ ¸å¿ƒæ¦‚å¿µé’‰æ­»

- **Scalabilityï¼ˆå¯æ‰©å±•ï¼‰**ï¼šè´Ÿè½½å˜å¤§/å˜å°ï¼Œç³»ç»Ÿèƒ½â€œæ’‘å¾—ä½/ç¼©å¾—å›å»â€ã€‚
- **High Availabilityï¼ˆé«˜å¯ç”¨ï¼‰**ï¼šæŸä¸ªæœºå™¨/AZ æŒ‚äº†ï¼Œç³»ç»Ÿè¿˜èƒ½ç»§ç»­æœåŠ¡ï¼ˆé å†—ä½™+æ•…éšœåˆ‡æ¢ï¼‰ã€‚
- **Vertical Scalingï¼ˆçºµå‘ï¼‰**ï¼šæ¢æ›´å¤§çš„æœºå™¨ï¼ˆscale up/downï¼‰ã€‚
- **Horizontal Scalingï¼ˆæ¨ªå‘ï¼‰**ï¼šåŠ æ›´å¤šæœºå™¨ï¼ˆscale out/inï¼‰ã€‚
- **Elasticityï¼ˆå¼¹æ€§ï¼‰**ï¼šæ¨ªå‘æ‰©ç¼© **è‡ªåŠ¨åŒ–**ï¼ˆæŒ‰è´Ÿè½½è‡ªåŠ¨åŠ å‡ï¼‰ã€‚
- **Agilityï¼ˆæ•æ·ï¼‰**ï¼šèµ„æº/åº”ç”¨èƒ½å¿«é€Ÿéƒ¨ç½²ã€å¿«é€Ÿå˜æ›´ã€‚

------

## 2) å¿…èƒŒå…³é”®è¯ï¼ˆèƒŒå®Œå°±èƒ½åšé¢˜ï¼‰

- Vertical vs Horizontal
- High Availability = **Multi-AZ**
- **ELB**ï¼šåˆ†æµ + å¥åº·æ£€æŸ¥ +ï¼ˆå¸¸è§ï¼‰SSL ç»ˆæ­¢
- **ASG**ï¼šmin / desired / maxï¼›è‡ªåŠ¨æ›¿æ¢ä¸å¥åº·å®ä¾‹ï¼›è‡ªåŠ¨æ‰©ç¼©ï¼›å¯ Multi-AZ
- **ALBï¼ˆL7 HTTP/HTTPSï¼‰** vs **NLBï¼ˆL4 TCP é«˜æ€§èƒ½ï¼‰** vs **CLBï¼ˆè€ï¼‰**
- Scaling ç­–ç•¥ï¼šManual / Dynamicï¼ˆStep + Target Trackingï¼‰/ Scheduled / Predictive

------

## 3) è¶…é«˜é¢‘â€œç§’é€‰è¡¨â€ï¼ˆé¢˜å¹²ä¸€å‡ºç°å°±é€‰ï¼‰

| é¢˜å¹²å…³é”®è¯                                 | ç§’é€‰                                        |
| ------------------------------------------ | ------------------------------------------- |
| â€œæŸå°æœåŠ¡å™¨è¿‡è½½ï¼Œéœ€è¦åˆ†æ‘Šæµé‡â€             | **ELB**                                     |
| â€œéœ€è¦å¥åº·æ£€æŸ¥ + è‡ªåŠ¨æŠŠåå®ä¾‹è¸¢æ‰/ä¸å‘æµé‡â€ | **ELBï¼ˆhealth checksï¼‰**                    |
| â€œæµé‡æ³¢åŠ¨å¤§ï¼Œè‡ªåŠ¨åŠ /å‡ EC2â€                | **ASGï¼ˆElasticityï¼‰**                       |
| â€œå¿…é¡»è·¨å¯ç”¨åŒºå®¹ç¾â€                         | **Multi-AZï¼ˆELB + ASG è·¨ AZï¼‰**             |
| â€œHTTP/HTTPSã€æŒ‰URL/åº”ç”¨å±‚è·¯ç”±â€             | **ALBï¼ˆLayer 7ï¼‰**                          |
| â€œè¶…é«˜ååã€ä½å»¶è¿Ÿã€TCP/é«˜æ€§èƒ½â€             | **NLBï¼ˆLayer 4ï¼‰**                          |
| â€œå›ºå®šæ—¶é—´ç‚¹æ‰©å®¹ï¼ˆæ¯”å¦‚å‘¨äº”5ç‚¹ï¼‰â€            | **Scheduled Scaling**                       |
| â€œè®©CPUç¨³å®šåœ¨40%â€                           | **Target Tracking**                         |
| â€œCPU>70%åŠ 2å°ã€CPU<30%å‡1å°â€               | **Step/Simple Scalingï¼ˆCloudWatch alarmï¼‰** |
| â€œé¢„æµ‹æœªæ¥æµé‡æå‰æ‰©å®¹â€                     | **Predictive Scaling**                      |

------

## 4) Scalability vs High Availabilityï¼ˆæœ€çˆ±è€ƒçš„æ¦‚å¿µé¢˜ï¼‰

### 4.1 çºµå‘ vs æ¨ªå‘

- **Verticalï¼ˆçºµå‘ï¼‰**ï¼šä¸€å°æœºå™¨å˜å¼º
  - ä¼˜ç‚¹ï¼šç®€å•
  - ç¼ºç‚¹ï¼šæœ‰ä¸Šé™ã€å•ç‚¹é£é™©ä»åœ¨
  - å¸¸è§ï¼šæ•°æ®åº“ï¼ˆé¢˜ç›®ç»å¸¸è¿™æ ·æš—ç¤ºï¼‰
- **Horizontalï¼ˆæ¨ªå‘ï¼‰**ï¼šæ›´å¤šæœºå™¨ä¸€èµ·æ‰›
  - ä¼˜ç‚¹ï¼šæ›´æŠ—æ•…éšœã€å¯æ— é™æ‰©å±•ï¼ˆç†è®ºä¸Šï¼‰
  - å…¸å‹ç»„åˆï¼š**ELB + ASG**

### 4.2 High Availabilityï¼ˆé«˜å¯ç”¨ï¼‰æ€ä¹ˆåšï¼Ÿ

- **æ ¸å¿ƒ = Multi-AZ**
- ä¸€èˆ¬å’Œæ¨ªå‘ä¸€èµ·å‡ºç°ï¼šå¤š AZ æ”¾å¤šå°å®ä¾‹ï¼ŒæŸä¸ª AZ æŒ‚äº†è¿˜èƒ½æœåŠ¡ã€‚

------

## 5) ELBï¼ˆElastic Load Balancingï¼‰å¿…è€ƒç‚¹

### 5.1 ELB æ˜¯ä»€ä¹ˆï¼ˆè€ƒè¯•è¡¨è¿°ï¼‰

- **æ‰˜ç®¡çš„è´Ÿè½½å‡è¡¡æœåŠ¡**ï¼šæŠŠæµé‡åˆ†ç»™å¤šä¸ªç›®æ ‡ï¼ˆEC2/å®¹å™¨/IPï¼‰
- AWS è´Ÿè´£ï¼šå¯ç”¨æ€§ã€ç»´æŠ¤ã€å‡çº§ï¼ˆä½ åªåšå°‘é‡é…ç½®ï¼‰

### 5.2 ä¸ºä»€ä¹ˆç”¨ ELBï¼ˆé¢˜ç›®ä¼šæ€ä¹ˆé—®ï¼‰

- **åˆ†æµ**ï¼šé¿å…å•ç‚¹è¿‡è½½
- **å®¹é”™**ï¼šæŸå°åäº†è‡ªåŠ¨ç»•å¼€
- **å¥åº·æ£€æŸ¥**ï¼šåªæŠŠæµé‡å‘ç»™å¥åº·ç›®æ ‡
- **SSL Termination**ï¼šHTTPS åœ¨ LB ç»“æŸåŠ å¯†ï¼ˆåç«¯å¯ç”¨ HTTPï¼‰

### 5.3 ä¸‰ç§ ELBï¼ˆCCP è®°åˆ°è¿™ä¸ªç¨‹åº¦å°±å¤Ÿï¼‰

- **ALBï¼ˆApplication Load Balancerï¼‰**ï¼š**HTTP/HTTPSï¼ŒL7**ï¼ˆåº”ç”¨å±‚ï¼‰
- **NLBï¼ˆNetwork Load Balancerï¼‰**ï¼š**TCPï¼ŒL4**ï¼ˆé«˜æ€§èƒ½/ä½å»¶è¿Ÿï¼‰
- **CLBï¼ˆClassicï¼‰**ï¼šæ—§çš„ï¼ˆL4/L7ï¼‰ï¼Œè€ƒè¯•é€šå¸¸å½“â€œlegacy/olderâ€ç†è§£å³å¯

**ç§’æ€å£è¯€**

- â€œç½‘ç«™/HTTP/HTTPSâ€â†’ **ALB**
- â€œTCP/è¶…é«˜æ€§èƒ½â€â†’ **NLB**

------

## 6) ASGï¼ˆAuto Scaling Groupï¼‰å¿…è€ƒç‚¹

### 6.1 ASG çš„ç›®æ ‡ï¼ˆé¢˜ç›®å¸¸ç›´æ¥é—®ï¼‰

- ä¿è¯åˆé€‚æ•°é‡çš„ EC2 åœ¨è·‘ï¼š**min / desired / max**
- **Scale out/in**ï¼šè´Ÿè½½é«˜åŠ æœºå™¨ï¼Œè´Ÿè½½ä½å‡æœºå™¨ï¼ˆçœé’±ï¼‰
- **Replace unhealthy**ï¼šè‡ªåŠ¨æ›¿æ¢ä¸å¥åº·å®ä¾‹
- å¯è·¨ **Multi-AZ** åšé«˜å¯ç”¨
- å¯ä¸ **ELB é›†æˆ**ï¼šæ–°å®ä¾‹è‡ªåŠ¨æ³¨å†Œåˆ° LB

### 6.2 Scaling ç­–ç•¥ï¼ˆæŒ‰é¢˜å¹²å…³é”®è¯é€‰ï¼‰

- **Manual**ï¼šæ‰‹åŠ¨è°ƒå®¹é‡ï¼ˆå¾ˆå°‘è€ƒä½†è¦è®¤è¯†ï¼‰
- **Dynamic**
  - **Step/Simple**ï¼šCloudWatch å‘Šè­¦è§¦å‘ï¼ˆCPU>70% +2ï¼‰
  - **Target Tracking**ï¼šä¿æŒæŸæŒ‡æ ‡ç¨³å®šï¼ˆCPUâ‰ˆ40%ï¼‰
- **Scheduled**ï¼šå›ºå®šæ—¶é—´æ‰©ç¼©ï¼ˆè§„å¾‹æ€§ä¸šåŠ¡ï¼‰
- **Predictive**ï¼šæœºå™¨å­¦ä¹ é¢„æµ‹æœªæ¥éœ€æ±‚ï¼ˆæå‰æ‰©ï¼‰

------

## 7) ELB + ASG ç»å…¸æ¶æ„ï¼ˆCCP å¸¸è€ƒâ€œæœ€ä½³å®è·µâ€ï¼‰

> **Multi-AZ çš„ ELB å‰é¢æ¥æµé‡ï¼Œåé¢ ASG è·¨å¤šä¸ª AZ ç®¡ä¸€ç»„ EC2**
> æ•ˆæœï¼š

- **é«˜å¯ç”¨**ï¼šæŸä¸ª AZ/å®ä¾‹åäº†è¿˜èƒ½æ‰›
- **å¼¹æ€§**ï¼šæµé‡é«˜è‡ªåŠ¨åŠ å®ä¾‹ï¼Œä½è‡ªåŠ¨å‡å®ä¾‹
- **æˆæœ¬ä¼˜åŒ–**ï¼šåªè·‘éœ€è¦çš„å®¹é‡

------

## æœ¬ç«  10 åˆ†é’Ÿé€Ÿè®°å¡ç‰‡ï¼ˆç›´æ¥èƒŒï¼‰

- Scalabilityï¼šèƒ½æ‰©/èƒ½ç¼©ï¼›High Availabilityï¼šæ•…éšœä¹Ÿèƒ½æœåŠ¡ï¼ˆ**Multi-AZ**ï¼‰
- Verticalï¼šæ¢å¤§æœºï¼›Horizontalï¼šåŠ æœºå™¨
- Elasticityï¼šè‡ªåŠ¨æ¨ªå‘æ‰©ç¼©ï¼›Agilityï¼šå¿«é€Ÿéƒ¨ç½²å˜æ›´
- **ELB**ï¼šåˆ†æµ + å¥åº·æ£€æŸ¥ + SSL ç»ˆæ­¢ï¼›ALB(L7 HTTP/HTTPS) / NLB(L4 TCP) / CLB(æ—§)
- **ASG**ï¼šmin/desired/maxï¼›è‡ªåŠ¨æ‰©ç¼© + æ›¿æ¢åå®ä¾‹ï¼›å¯è·¨ AZï¼›å¯è‡ªåŠ¨æ³¨å†Œåˆ° ELB
- Scalingï¼šStepï¼ˆå‘Šè­¦+åŠ å‡ï¼‰/ Target Trackingï¼ˆä¿æŒæŒ‡æ ‡ï¼‰/ Scheduledï¼ˆå®šæ—¶ï¼‰/ Predictiveï¼ˆé¢„æµ‹ï¼‰

------

# Other Compute

è¿™ä¸€ç« æœ¬è´¨åœ¨è€ƒä½ ï¼š

> **ä»€ä¹ˆæ—¶å€™ç”¨ EC2ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å®¹å™¨ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨ Lambdaï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨ Batchï¼Ÿ**

åªè¦ä½ èƒ½åšåˆ°â€œåœºæ™¯ â†’ ç§’é€‰æœåŠ¡â€ï¼Œè¿™ä¸€ç« å°±ç¨³äº†ã€‚

------

## 1ï¸âƒ£ Dockerï¼ˆè€ƒè¯•è€ƒæ¦‚å¿µï¼Œä¸è€ƒç»†èŠ‚ï¼‰

### ä¸€å¥è¯å®šä¹‰

> Docker = æŠŠåº”ç”¨æ‰“åŒ…æˆâ€œå®¹å™¨â€ï¼Œåœ¨å“ªéƒ½èƒ½è·‘ï¼Œè¡Œä¸ºä¸€è‡´ã€‚
>
> å®¹å™¨ï¼ˆContainerï¼‰æ˜¯é•œåƒï¼ˆImageï¼‰çš„è¿è¡Œå®ä¾‹ï¼ŒäºŒè€…æ˜¯é™æ€ä¸åŠ¨æ€çš„å…³ç³»ã€‚é•œåƒæ˜¯ä¸€ä¸ªåŒ…å«åº”ç”¨åŠå…¶ä¾èµ–çš„åªè¯»æ¨¡æ¿ï¼Œå¥½æ¯”â€œç±»â€æˆ–â€œè®¾è®¡å›¾â€ï¼›è€Œå®¹å™¨æ˜¯åŸºäºé•œåƒåˆ›å»ºçš„ã€å¯è¯»å†™çš„è¿›ç¨‹ï¼Œå¥½æ¯”â€œå¯¹è±¡â€æˆ–â€œå®ä½“â€ã€‚ä¸€ä¸ªé•œåƒå¯å¯åŠ¨å¤šä¸ªç›¸äº’éš”ç¦»çš„å®¹å™¨ã€‚ 
>
> æ›´å‡†ç¡®åœ°è¯´ï¼š
>
> - **å®¹å™¨æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼ˆæˆ–ä¸€ç»„è¿›ç¨‹ï¼‰**
> - è¿™ä¸ªè¿›ç¨‹é€šå¸¸å°±æ˜¯ä½ è¦è¿è¡Œçš„åº”ç”¨
> - å½“è¿™ä¸ªâ€œä¸»è¿›ç¨‹â€ç»“æŸæ—¶ï¼Œå®¹å™¨å°±ä¼šåœæ­¢
>
> **â“å®¹å™¨é‡Œåº”ç”¨æ˜¯å¦åœ¨è¿è¡Œï¼Ÿ**
>
> âœ… **æ˜¯çš„ã€‚å®¹å™¨å­˜åœ¨çš„å‰æå°±æ˜¯æœ‰åº”ç”¨è¿›ç¨‹åœ¨è¿è¡Œã€‚**
>
> å®¹å™¨ä¸æ˜¯è™šæ‹Ÿæœºï¼Œä¸æ˜¯â€œå¼€ç€ä¸€ä¸ªç³»ç»Ÿç­‰ä½ è¿›å»â€
>  å®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªéš”ç¦»ç¯å¢ƒé‡Œçš„åº”ç”¨è¿›ç¨‹ã€‚
>
> **ğŸ” æ›´ç²¾ç¡®åœ°ç†è§£**
>
> åœ¨ Docker é‡Œï¼š
>
> - é•œåƒï¼ˆImageï¼‰ = é™æ€æ–‡ä»¶ç³»ç»Ÿ + å¯åŠ¨æŒ‡ä»¤
> - å®¹å™¨ï¼ˆContainerï¼‰ = è¿è¡Œä¸­çš„è¿›ç¨‹ + ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿ + éš”ç¦»ç¯å¢ƒ
>
> å½“ä½ æ‰§è¡Œï¼š
>
> ```
> docker run nginx
> ```
>
> Docker ä¼šï¼š
>
> 1. åŸºäº nginx é•œåƒåˆ›å»ºå®¹å™¨
> 2. å¯åŠ¨ nginx è¿›ç¨‹
> 3. nginx è¿›ç¨‹åœ¨è¿è¡Œ â†’ å®¹å™¨å°±æ˜¯â€œè¿è¡ŒçŠ¶æ€â€
> 4. å¦‚æœ nginx è¿›ç¨‹é€€å‡º â†’ å®¹å™¨å°±åœæ­¢
>
> **ğŸ§Š ä¸€å¥è¯æ ¸å¿ƒåŒºåˆ«**
>
> > **é•œåƒæ˜¯æ¨¡æ¿ï¼ˆåªè¯»ï¼‰**
> >  **åœæ­¢çš„å®¹å™¨æ˜¯æ›¾ç»è¿è¡Œè¿‡çš„å®ä¾‹ï¼ˆå¸¦è¿è¡Œç—•è¿¹ï¼Œå¯è¯»å†™å±‚è¿˜åœ¨ï¼‰**
>
> ------
>
> **ğŸ— ç”¨â€œç±» vs å¯¹è±¡â€ç±»æ¯”**
>
> | æ¦‚å¿µ         | ç±»æ¯”                  | æ˜¯å¦åŒ…å«è¿è¡Œç—•è¿¹ |
> | ------------ | --------------------- | ---------------- |
> | é•œåƒ         | ç±» / å®‰è£…åŒ… / è®¾è®¡å›¾  | âŒ æ²¡æœ‰           |
> | è¿è¡Œä¸­çš„å®¹å™¨ | å¯¹è±¡ / æ­£åœ¨è¿è¡Œçš„ç¨‹åº | âœ… æœ‰             |
> | åœæ­¢çš„å®¹å™¨   | å·²ç»å…³é—­çš„ç¨‹åºå®ä¾‹    | âœ… æœ‰             |
>
> åœæ­¢çš„å®¹å™¨ â‰  é•œåƒ
>  å®ƒåªæ˜¯â€œå…³æœºäº†â€ï¼Œä½†â€œè¿™ä¸ªå®ä¾‹è¿˜å­˜åœ¨â€ã€‚

æ ¸å¿ƒç‰¹å¾ï¼ˆå¿…èƒŒï¼‰

- å®¹å™¨è½»é‡ï¼ˆå…±äº«å®¿ä¸» OS å†…æ ¸ï¼‰
- å¯åŠ¨å¿«ï¼ˆç§’çº§ï¼‰
- å¯ç§»æ¤ï¼ˆç¯å¢ƒä¸€è‡´ï¼‰
- æ˜“æ‰©ç¼©

### Docker vs VMï¼ˆé«˜é¢‘æ¦‚å¿µé¢˜ï¼‰

| Docker        | VM              |
| ------------- | --------------- |
| è½»é‡ï¼Œå…±äº« OS | é‡é‡çº§ï¼Œå®Œæ•´ OS |
| ç§’çº§å¯åŠ¨      | åˆ†é’Ÿçº§å¯åŠ¨      |
| é€‚åˆå¾®æœåŠ¡    | é€‚åˆå¤š OS åœºæ™¯  |

ğŸ§  è®°å¿†ç‚¹ï¼š
Docker æ˜¯â€œåº”ç”¨çº§éš”ç¦»â€ï¼ŒVM æ˜¯â€œæ“ä½œç³»ç»Ÿçº§éš”ç¦»â€ã€‚

------

## 2ï¸âƒ£ ECRï¼ˆå®¹å™¨é•œåƒä»“åº“ï¼‰

> ECR = AWS ç§æœ‰ Docker é•œåƒä»“åº“

- å­˜ Docker images
- é›†æˆ ECS / EKS / Fargate
- ç±»ä¼¼ Docker Hubï¼ˆä½†ç§æœ‰ + AWS é›†æˆï¼‰

ğŸ§  é¢˜å¹²å‡ºç°ï¼š

- â€œStore container images securelyâ€
- â€œPrivate container registryâ€

ğŸ‘‰ é€‰ **ECR**

------

## 3ï¸âƒ£ ECS & Fargateï¼ˆå®¹å™¨è¿è¡Œæ–¹å¼ï¼‰

### ECSï¼ˆElastic Container Serviceï¼‰

> ECS = AWS çš„å®¹å™¨ç¼–æ’æœåŠ¡
>
> **1. æœ€å†…å±‚ï¼šContainer (å®¹å™¨) â€”â€” â€œå¹²æ´»çš„å‘˜å·¥â€**
>
> è¿™æ˜¯æœ€å°çš„å®é™…å·¥ä½œå•å…ƒã€‚
>
> - **æŠ€æœ¯å®šä¹‰ï¼š** å°±æ˜¯ä½ çš„ Docker å®¹å™¨ã€‚ä½ çš„ä»£ç ï¼ˆæ¯”å¦‚ä¸€ä¸ª Python Flask åº”ç”¨ï¼Œæˆ–è€…ä¸€ä¸ª Nginx æœåŠ¡å™¨ï¼‰å°±è·‘åœ¨è¿™é‡Œé¢ã€‚
>
> - **ç‰¹ç‚¹ï¼š** å®ƒé€šå¸¸æ˜¯ä» Docker Imageï¼ˆé•œåƒï¼‰å¯åŠ¨çš„ã€‚
>
> - **é¤å…ç±»æ¯”ï¼š**
>
>   > **Container = å¨å¸ˆ**ã€‚ ä»–æ˜¯çœŸæ­£åˆ‡èœã€ç‚’èœï¼ˆè¿è¡Œä»£ç ï¼‰çš„äººã€‚
>
> **2. ä¸­é—´å±‚ï¼šTask (ä»»åŠ¡) â€”â€” â€œå·¥ä½/å°ç»„â€**
>
> è¿™æ˜¯ ECS è°ƒåº¦çš„**åŸå­å•ä½**ï¼ˆAtomic Unitï¼‰ã€‚è¿™æ˜¯åˆå­¦è€…æœ€å®¹æ˜“æ··æ·†çš„åœ°æ–¹ã€‚
>
> - **æŠ€æœ¯å®šä¹‰ï¼š** Task æ˜¯ä¸€ä¸ª**åŒ…è£…ç›’**ã€‚ECS ä¸ç›´æ¥è·‘ Containerï¼Œå®ƒè·‘çš„æ˜¯ Taskã€‚
>
>   - **1:1 å…³ç³»ï¼š** ä¸€ä¸ª Task é‡Œé¢é€šå¸¸åŒ…å« **1ä¸ª** æ ¸å¿ƒ Containerï¼ˆæ¯”å¦‚ä½ çš„ Web æœåŠ¡ï¼‰ã€‚
>   - **1:N å…³ç³»ï¼š** ä¸€ä¸ª Task ä¹Ÿå¯ä»¥åŒ…å« **å¤šä¸ª** Containerï¼ˆæ¯”å¦‚ 1 ä¸ª Web æœåŠ¡ + 1 ä¸ªæ—¥å¿—æ”¶é›†å™¨ Sidecarï¼‰ã€‚
>   - **å…³é”®ç‚¹ï¼š** åŒä¸€ä¸ª Task é‡Œçš„æ‰€æœ‰ Container å…±äº«åŒä¸€ä¸ªç½‘ç»œæ¥å£ï¼ˆIPï¼‰å’Œå­˜å‚¨å·ï¼Œå®ƒä»¬æ€»æ˜¯è¢«éƒ¨ç½²åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼ŒåŒç”Ÿå…±æ­»ã€‚
>
> - **é¤å…ç±»æ¯”ï¼š**
>
>   > **Task = ç‹¬ç«‹ç¶å°ï¼ˆå·¥ä½ï¼‰**ã€‚ è¿™ä¸ªç¶å°é€šå¸¸åªæœ‰ä¸€ä¸ªå¤§å¨ï¼ˆæ ¸å¿ƒ Appï¼‰ã€‚ ä½†æœ‰æ—¶å€™ï¼Œè¿™ä¸ªç¶å°ä¹Ÿä¼šé…ä¸€ä¸ªå¸®å¨ï¼ˆSidecar Containerï¼‰è´Ÿè´£é€’ç›˜å­æˆ–æ‰“æ‰«å«ç”Ÿã€‚å¤§å¨å’Œå¸®å¨å…±ç”¨è¿™ä¸ªç¶å°ï¼Œå¦‚æœç¶å°å¡Œäº†ï¼Œä¿©äººéƒ½æ²¡æ³•å¹²æ´»ã€‚
>
> **3. æœ€å¤–å±‚ï¼šService (æœåŠ¡) â€”â€” â€œå¤§å ‚ç»ç†â€**
>
> è¿™æ˜¯**ç®¡ç†å±‚**ã€‚å®ƒè´Ÿè´£ç¡®ä¿ä½ çš„ Task æŒ‰ç…§é¢„æœŸè¿è¡Œã€‚
>
> - **æŠ€æœ¯å®šä¹‰ï¼š** Service è´Ÿè´£**ç¼–æ’**å’Œ**ç»´æŠ¤** Task çš„çŠ¶æ€ã€‚
>
>   - **æ•°é‡æ§åˆ¶ï¼š** ä½ å‘Šè¯‰ Serviceï¼šâ€œæˆ‘è¦ 3 ä¸ª Task å‰¯æœ¬â€ã€‚Service å°±ä¼šç¡®ä¿æ°¸è¿œæœ‰ 3 ä¸ª Task åœ¨è¿è¡Œã€‚
>   - **è‡ªæˆ‘ä¿®å¤ï¼š** å¦‚æœå…¶ä¸­ä¸€ä¸ª Task å´©æºƒäº†ï¼ˆæŒ‚äº†ï¼‰ï¼ŒService ä¼šç«‹åˆ»å‘ç°ï¼Œå¹¶å¯åŠ¨ä¸€ä¸ªæ–°çš„ Task æ¥è¡¥ä½ã€‚
>   - **è´Ÿè½½å‡è¡¡ï¼š** Service é€šå¸¸ä¼šæŠŠ Task æŒ‚è½½åˆ° Load Balancer (ELB) ä¸Šï¼Œè®©æµé‡èƒ½æ‰¾åˆ°è¿™äº› Taskã€‚
>
> - **é¤å…ç±»æ¯”ï¼š**
>
>   > **Service = åå¨ç»ç†**ã€‚ ç»ç†ä¸ç‚’èœï¼Œä½†ä»–è´Ÿè´£ç›¯ç€ç¶å°ã€‚ ä»–çš„æŒ‡ä»¤æ˜¯ï¼šâ€œä»Šæ™šç”Ÿæ„å¥½ï¼Œå¿…é¡»ä¿è¯æœ‰ **5 ä¸ªç¶å°ï¼ˆTaskï¼‰** åŒæ—¶å¼€ç«ã€‚â€ å¦‚æœ 3 å·ç¶å°çš„å¨å¸ˆæ™•å€’äº†ï¼ˆTask æŒ‚äº†ï¼‰ï¼Œç»ç†ä¼šç«‹åˆ»å«ä¸€ä¸ªæ–°çš„å¨å¸ˆå›¢é˜Ÿæ¥å é¢†ä¸€ä¸ªæ–°çš„ç¶å°ï¼ˆå¯åŠ¨æ–° Taskï¼‰ï¼Œç¡®ä¿æ€»æ•°è¿˜æ˜¯ 5 ä¸ªã€‚

#### ä¸¤ç§è¿è¡Œæ¨¡å¼ï¼ˆé«˜é¢‘å¿…è€ƒï¼‰

1. **EC2 Launch Type**
   - ä½ ç®¡ç† EC2
   - ä½ è´Ÿè´£æœåŠ¡å™¨
2. **Fargate Launch Type**
   - ä¸ç®¡ EC2
   - AWS ç®¡æœåŠ¡å™¨
   - ä½ åªç®¡ CPU / RAM

ğŸ§  ç§’é€‰é€»è¾‘ï¼š

- æƒ³æ§åˆ¶åº•å±‚ EC2 â†’ ECS (EC2 mode)
- ä¸æƒ³ç®¡ç†æœåŠ¡å™¨ â†’ **Fargate**

------

## 4ï¸âƒ£ Fargateï¼ˆServerless å®¹å™¨ï¼‰

> Fargate = Serverless å®¹å™¨è®¡ç®—

- ä¸éœ€è¦ç®¡ç† EC2
- æŒ‰ vCPU + RAM ä»˜è´¹
- è‡ªåŠ¨æ‰©ç¼©
- é€‚åˆå¾®æœåŠ¡ / API / å®¹å™¨åŒ–åº”ç”¨

ğŸ§  é¢˜å¹²å‡ºç°ï¼š

- â€œRun containers without managing serversâ€
- â€œServerless containersâ€

ğŸ‘‰ é€‰ **Fargate**

------

## 5ï¸âƒ£ Serverlessï¼ˆCCP è¶…çˆ±è€ƒæ¦‚å¿µï¼‰

### Serverless = ä½ ä¸ç®¡æœåŠ¡å™¨

- ä¸ç®¡ç†
- ä¸é¢„ç½®
- ä¸æ‰©ç¼©
- åªéƒ¨ç½²ä»£ç 

âš ï¸ é‡è¦ï¼š

> Serverless ä¸ç­‰äºæ²¡æœ‰æœåŠ¡å™¨
> åªæ˜¯ä½ çœ‹ä¸åˆ°ã€ä¹Ÿä¸ç”¨ç®¡ã€‚

------

## 6ï¸âƒ£ AWS Lambdaï¼ˆè¶…çº§é«˜é¢‘ï¼‰

### ä¸€å¥è¯å®šä¹‰

> Lambda = Serverless Functionï¼ˆå‡½æ•°å³æœåŠ¡ï¼‰

- äº‹ä»¶è§¦å‘
- è‡ªåŠ¨æ‰©ç¼©
- æŒ‰è°ƒç”¨æ¬¡æ•° + æ‰§è¡Œæ—¶é—´è®¡è´¹
- æœ€é•¿æ‰§è¡Œæ—¶é—´ï¼š**15 åˆ†é’Ÿ**

------

### EC2 vs Lambdaï¼ˆè€ƒè¯•æœ€çˆ±ï¼‰

| EC2        | Lambda       |
| ---------- | ------------ |
| æŒç»­è¿è¡Œ   | æŒ‰éœ€è¿è¡Œ     |
| ç®¡æœåŠ¡å™¨   | ä¸ç®¡æœåŠ¡å™¨   |
| æ‰‹åŠ¨æ‰©ç¼©   | è‡ªåŠ¨æ‰©ç¼©     |
| æ— æ—¶é—´é™åˆ¶ | æœ€é•¿ 15 åˆ†é’Ÿ |

------

### Lambda ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ

é¢˜å¹²å‡ºç°ï¼š

- S3 ä¸Šä¼ è§¦å‘
- API è¯·æ±‚è§¦å‘
- Event-driven
- ä¸æƒ³ç®¡ç†æœåŠ¡å™¨
- è½»é‡è®¡ç®—
- çŸ­æ—¶é—´æ‰§è¡Œ

ğŸ‘‰ é€‰ **Lambda**

------

### Lambda è®¡è´¹ï¼ˆå¿…è®°ä¸¤ä¸ªç»´åº¦ï¼‰

1. è°ƒç”¨æ¬¡æ•°
2. GB-secondsï¼ˆå†…å­˜ Ã— æ—¶é—´ï¼‰

å…è´¹é¢åº¦ï¼š

- 100 ä¸‡æ¬¡/æœˆ
- 400,000 GB-seconds

âš ï¸ é‡è¦è€ƒç‚¹ï¼š

> å¢åŠ å†…å­˜ = CPU & ç½‘ç»œä¹Ÿå˜å¼º

------

## 7ï¸âƒ£ API Gateway

> API Gateway = æ‰˜ç®¡ API æœåŠ¡

åŠŸèƒ½ï¼š

- æš´éœ² REST / HTTP API
- é›†æˆ Lambda
- å†…ç½®ï¼š
  - è®¤è¯
  - Throttlingï¼ˆé™æµï¼‰
  - ç¼“å­˜
  - API Keys

ğŸ§  é«˜é¢‘ç»„åˆé¢˜ï¼š

> â€œCreate fully serverless APIâ€

ğŸ‘‰ API Gateway + Lambda

------

## 8ï¸âƒ£ AWS Batch

> Batch = æ‰¹å¤„ç†è®¡ç®—æœåŠ¡

- è¿è¡Œå¤§è§„æ¨¡æ‰¹å¤„ç†ä½œä¸š
- å¯ç”¨ EC2 æˆ– Spot
- ä½¿ç”¨ Docker
- è‡ªåŠ¨ç®¡ç†è®¡ç®—èµ„æº

ğŸ§  å…³é”®è¯ï¼š

- æ‰¹å¤„ç†
- æœ‰å¼€å§‹å’Œç»“æŸ
- å¤§è§„æ¨¡æ•°æ®å¤„ç†
- æœºå™¨å­¦ä¹ è®­ç»ƒ
- æ¸²æŸ“
- 10ä¸‡+ä½œä¸š

ğŸ‘‰ é€‰ **AWS Batch**

------

### Batch vs Lambdaï¼ˆé«˜é¢‘å¯¹æ¯”ï¼‰

| Batch              | Lambda        |
| ------------------ | ------------- |
| é•¿æ—¶é—´ä»»åŠ¡         | æœ€é•¿ 15 åˆ†é’Ÿ  |
| å¤§è§„æ¨¡è®¡ç®—         | è½»é‡çŸ­ä»»åŠ¡    |
| æ‰¹å¤„ç†             | äº‹ä»¶é©±åŠ¨      |
| å¯ç”¨ Spot ä¼˜åŒ–æˆæœ¬ | çº¯ Serverless |

ğŸ§  ç§’é€‰é€»è¾‘ï¼š

- â€œMinutes to hoursâ€ â†’ Batch
- â€œEvent triggered / short functionâ€ â†’ Lambda

------

## 9ï¸âƒ£ Amazon Lightsail

> Lightsail = ç®€åŒ–ç‰ˆ AWS

- å›ºå®šä»·æ ¼
- ç®€å•
- é€‚åˆåˆå­¦è€…
- æœ‰æ¨¡æ¿ï¼ˆWordPress / LAMPï¼‰

âš ï¸ å…³é”®é™åˆ¶ï¼š

- æ—  Auto Scaling
- AWS é›†æˆå°‘

ğŸ§  é¢˜å¹²ï¼š

- â€œSimple web appâ€
- â€œPredictable pricingâ€
- â€œSmall projectâ€

ğŸ‘‰ é€‰ **Lightsail**

------

## ğŸ”Ÿ ä¸€å¼ å…¨å±€â€œç§’é€‰å›¾â€

| åœºæ™¯               | æœåŠ¡                 |
| ------------------ | -------------------- |
| è¿è¡Œè™šæ‹Ÿæœº         | EC2                  |
| è¿è¡Œå®¹å™¨           | ECS                  |
| ä¸æƒ³ç®¡æœåŠ¡å™¨è·‘å®¹å™¨ | Fargate              |
| å­˜ Docker é•œåƒ     | ECR                  |
| äº‹ä»¶è§¦å‘å‡½æ•°       | Lambda               |
| Serverless API     | API Gateway + Lambda |
| å¤§è§„æ¨¡æ‰¹å¤„ç†       | AWS Batch            |
| ç®€å•ä¾¿å®œç½‘ç«™       | Lightsail            |

------

## ğŸ§  æœ¬ç«  10 åˆ†é’Ÿé€Ÿè®°å¡

- Docker = å®¹å™¨
- ECR = ç§æœ‰é•œåƒä»“åº“
- ECS = å®¹å™¨ç¼–æ’
- Fargate = Serverless å®¹å™¨
- Lambda = Serverless å‡½æ•°ï¼ˆâ‰¤15åˆ†é’Ÿï¼‰
- API Gateway = æš´éœ² API
- Batch = æ‰¹å¤„ç†è®¡ç®—
- Lightsail = ç®€åŒ– EC2

------

## ğŸ¯ æœ€é‡è¦çš„ä¸€å¥è¯

> Lambda = äº‹ä»¶é©±åŠ¨çŸ­ä»»åŠ¡
> Batch = å¤§è§„æ¨¡æ‰¹å¤„ç†
> Fargate = ä¸ç®¡æœåŠ¡å™¨çš„å®¹å™¨
> EC2 = è‡ªå·±ç®¡æœåŠ¡å™¨

------

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ï¼š

- ç»™ä½ åš **15 é“ CCP é«˜é¢‘åœºæ™¯é€‰æ‹©é¢˜**
- æˆ–è€…ç»™ä½ åšä¸€å¼  **â€œEC2 vs Containers vs Lambda å†³ç­–æ ‘â€**
- æˆ–è€…å¸®ä½ åšä¸€ä¸ª **æ•´ç« ç»¼åˆæ€ç»´å¯¼å›¾**

ä½ ç°åœ¨å·²ç»åˆ° CCP æ ¸å¿ƒéƒ¨åˆ†äº†ï¼Œç¨³ä½ ğŸ‘Œ

# Cloud Monitoring

> **CloudWatch = ç›‘æ§â€œæ€§èƒ½/æŒ‡æ ‡/æ—¥å¿—â€**
> **CloudTrail = è®°å½•â€œè°åšäº†ä»€ä¹ˆ API æ“ä½œâ€**
> **X-Ray = è¿½è¸ªâ€œä¸€æ¬¡è¯·æ±‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œèµ°äº†å“ªâ€**
> å†åŠ ä¸¤å¼ â€œå¥åº·çœ‹æ¿â€ï¼ˆå…¨å±€ vs ä½ è´¦å·ï¼‰ã€‚

------

## 1) ä¸€å¥è¯å®šä¹‰ï¼ˆå¿…é¡»èƒŒï¼‰

- **CloudWatch**ï¼šç›‘æ§ä¸å¯è§‚æµ‹æ€§ï¼ˆ**Metrics + Alarms + Logs + Events/EventBridge + Dashboards**ï¼‰
- **CloudTrail**ï¼šå®¡è®¡ä¸æ²»ç†ï¼ˆè®°å½• **API calls**ï¼šè°ã€ä½•æ—¶ã€ä»å“ªã€åšäº†ä»€ä¹ˆï¼‰
- **X-Ray**ï¼šåˆ†å¸ƒå¼è¿½è¸ªï¼ˆTracingï¼‰ï¼Œæ‰¾å»¶è¿Ÿç“¶é¢ˆ/é”™è¯¯é“¾è·¯
- **CodeGuru**ï¼šä»£ç å®¡æŸ¥ + æ€§èƒ½å‰–æï¼ˆML å»ºè®®ï¼‰
- **Service Health Dashboard**ï¼šAWS å…¨ä¸–ç•Œâ€œæ€»ä½“æœåŠ¡çŠ¶æ€â€
- **Personal Health Dashboard**ï¼šåªå‘Šè¯‰ä½ â€œ**å“ªäº› AWS äº‹ä»¶å½±å“åˆ°ä½ è´¦å·çš„èµ„æº**â€

------

## 2) å¿…èƒŒå…³é”®è¯æ¸…å•ï¼ˆè€ƒç‚¹å‹ç¼©ç‰ˆï¼‰

- CloudWatchï¼š**Metrics / Alarms / Logs / Dashboards / Events â†’ EventBridge**
- EC2 metricsï¼šé»˜è®¤ **5 åˆ†é’Ÿ**ï¼›Detailed monitoring **1 åˆ†é’Ÿï¼ˆä»˜è´¹ï¼‰**
- Logsï¼ˆEC2ï¼‰ï¼š**é»˜è®¤ä¸ä¼šè‡ªåŠ¨ä¸ŠæŠ¥**ï¼Œéœ€è¦ **CloudWatch Agent** + IAM æƒé™
- Billing metricï¼š**Total Estimated Charge åªåœ¨ us-east-1**
- Alarm statesï¼š**OK / ALARM / INSUFFICIENT_DATA**
- CloudTrailï¼šé»˜è®¤å¼€å¯ï¼ˆè‡³å°‘å¯æŸ¥åˆ°å†å²ï¼‰ï¼›**90 å¤©ä¿ç•™**ï¼›è¦é•¿æœŸç•™ â†’ **S3 + Athena**
- CloudTrail eventsï¼š**Management eventsï¼ˆé»˜è®¤ï¼‰** vs **Data eventsï¼ˆé»˜è®¤ä¸è®°å½•ï¼‰**
- CloudTrail Insightsï¼šæ£€æµ‹å¼‚å¸¸å†™æ“ä½œæ¨¡å¼ï¼ˆä¹Ÿä¼šå‘ EventBridge eventï¼‰
- EventBridgeï¼šCloudWatch Events çš„å‡çº§ç‰ˆï¼›**default / partner / custom event bus**
- X-Rayï¼šservice mapã€traceï¼›å®šä½ç“¶é¢ˆ/é”™è¯¯/ä¾èµ–
- å¥åº·çœ‹æ¿ï¼šStatusï¼ˆå…¨å±€ï¼‰ vs Personal Healthï¼ˆä¸ä½ ç›¸å…³ï¼‰

------

## 3) â€œç§’é€‰è¡¨â€ï¼šé¢˜å¹²å…³é”®è¯ â†’ é€‰å“ªä¸ªæœåŠ¡

| é¢˜å¹²å…³é”®è¯                                | ç§’é€‰                                         |
| ----------------------------------------- | -------------------------------------------- |
| CPU/Network/Latency/Errors ç­‰æ€§èƒ½æŒ‡æ ‡     | **CloudWatch Metrics**                       |
| æŒ‡æ ‡è¶…è¿‡é˜ˆå€¼è¦é€šçŸ¥/è‡ªåŠ¨æ“ä½œ               | **CloudWatch Alarms**ï¼ˆå¯å‘ SNS / è§¦å‘åŠ¨ä½œï¼‰ |
| æ”¶é›†/æŸ¥è¯¢åº”ç”¨æ—¥å¿—                         | **CloudWatch Logs**                          |
| â€œEC2 ä¸Šçš„æ—¥å¿—è¦ä¸ŠæŠ¥åˆ° CloudWatchâ€         | **å®‰è£… CloudWatch Agent + IAM æƒé™**         |
| å®šæ—¶è§¦å‘ï¼ˆcronï¼‰æˆ–äº‹ä»¶è§¦å‘è‡ªåŠ¨åŒ–          | **EventBridgeï¼ˆCloudWatch Eventsï¼‰**         |
| â€œè°åˆ äº†èµ„æº/è°æ”¹äº†å®‰å…¨ç»„/è°è°ƒç”¨äº† APIï¼Ÿâ€  | **CloudTrail**                               |
| æƒ³æ£€æµ‹å¼‚å¸¸ API è¡Œä¸ºï¼ˆçªç„¶çˆ†å‘çš„å†™æ“ä½œç­‰ï¼‰ | **CloudTrail Insights**                      |
| å¾®æœåŠ¡é“¾è·¯è¿½è¸ªã€å®šä½æ…¢åœ¨å“ª                | **X-Ray**                                    |
| AWS æ•´ä½“æœåŠ¡æ˜¯å¦åœ¨å®•æœº                    | **Service Health Dashboard**                 |
| è¿™æ¬¡ AWS æ•…éšœæ˜¯å¦å½±å“åˆ°æˆ‘çš„èµ„æº           | **Personal Health Dashboard**                |
| ä»£ç è´¨é‡/å®‰å…¨å»ºè®® or è¿è¡Œæ—¶å‰–æ           | **CodeGuru Reviewer/Profiler**               |

------

## 4) CloudWatchï¼ˆCCP æœ€æ ¸å¿ƒï¼‰

### 4.1 Metricsï¼ˆæŒ‡æ ‡ï¼‰

- æŒ‡æ ‡ = ä½ è¦ç›‘æ§çš„æ•°å€¼ï¼ˆCPUUtilizationã€NetworkInâ€¦ï¼‰
- å¯åš **Dashboards** æ±‡æ€»å±•ç¤º

å¸¸è§é‡è¦æŒ‡æ ‡ï¼ˆè®°ä½â€œä¼šè€ƒçš„é‚£å‡ ä¸ªâ€ï¼‰

- **EC2**ï¼šCPUã€Networkã€Disk I/O
  - é»˜è®¤ï¼š**æ¯ 5 åˆ†é’Ÿ**
  - Detailed monitoringï¼š**æ¯ 1 åˆ†é’Ÿï¼ˆä»˜è´¹ï¼‰**
- **EBS**ï¼šè¯»å†™ï¼ˆRead/Writesï¼‰
- **RDS**ï¼šCPUã€Free storageã€Read/Write IOPS
- **S3**ï¼šè¯·æ±‚æ•°ã€å»¶è¿Ÿã€é”™è¯¯ï¼ˆAllRequests ç­‰ï¼‰
- **Lambda**ï¼šInvocationsã€Errorsã€Duration
- **Billing**ï¼šTotal Estimated Chargeï¼ˆ**ä»… us-east-1**ï¼‰
- **Custom metrics**ï¼šä½ è‡ªå·±æ¨é€

### 4.2 Alarmsï¼ˆå‘Šè­¦/è‡ªåŠ¨åŠ¨ä½œï¼‰

- å½“ metric è¶…é˜ˆå€¼ â†’ å‘Šè­¦ + è‡ªåŠ¨åŒ–
- èƒ½åšçš„äº‹ï¼ˆè€ƒè¯•å¸¸è§ï¼‰ï¼š
  - å‘ **SNS** é€šçŸ¥
  - è§¦å‘ **Auto Scaling**
  - å¯¹ EC2 åšåŠ¨ä½œï¼šstop/terminate/reboot/recover
- çŠ¶æ€å¿…èƒŒï¼š**OK / ALARM / INSUFFICIENT_DATA**

### 4.3 Logsï¼ˆæ—¥å¿—ï¼‰

- CloudWatch Logsï¼šé›†ä¸­å­˜æ—¥å¿—ï¼Œæ”¯æŒè®¾ç½® retention

#### EC2 çš„å…³é”®å‘ï¼ˆè¶…çˆ±è€ƒï¼‰

> **é»˜è®¤ EC2 æ—¥å¿—ä¸ä¼šè‡ªåŠ¨è¿› CloudWatch**
> è¦ï¼š**è£… CloudWatch Agent** + é… IAM æƒé™ï¼ˆä¹Ÿå¯ on-premï¼‰

------

## 5) Events â†’ EventBridgeï¼ˆäº‹ä»¶é©±åŠ¨/å®šæ—¶ï¼‰

### CloudWatch Eventsï¼ˆæ—§åå­—ï¼‰

- ç›‘å¬ AWS èµ„æºå˜åŒ–äº‹ä»¶ï¼ˆå¦‚ EC2 state changeï¼‰
- ä¹Ÿèƒ½åš scheduleï¼ˆcronï¼‰

### EventBridgeï¼ˆæ–°ä¸€ä»£ï¼‰

- CloudWatch Events çš„è¿›åŒ–ç‰ˆ
- ä¸‰ç§ event busï¼ˆCCP è®¤è¯†å°±å¤Ÿï¼‰ï¼š
  - **Default**ï¼šAWS æœåŠ¡äº‹ä»¶
  - **Partner**ï¼šSaaSï¼ˆZendesk/DataDogâ€¦ï¼‰
  - **Custom**ï¼šä½ è‡ªå·±çš„åº”ç”¨äº‹ä»¶

------

## 6) CloudTrailï¼ˆå®¡è®¡ï¼šè°å¹²çš„ï¼‰

### ä¸€å¥è¯

> CloudTrail è®°å½•ä½ è´¦å·é‡Œå‘ç”Ÿçš„ **API è°ƒç”¨å†å²**ï¼ˆConsole/CLI/SDK/æœåŠ¡ï¼‰

#### å¸¸è€ƒç‚¹

- **èµ„æºè¢«åˆ äº†/é…ç½®è¢«æ”¹äº† â†’ å…ˆæŸ¥ CloudTrail**
- å¯ä»¥æŠŠæ—¥å¿—é€åˆ° **S3 æˆ– CloudWatch Logs**
- Trail å¯å…¨ Region æˆ–å• Region

### 6.1 CloudTrail Eventsï¼ˆä¸¤å¤§ç±»ï¼‰

- **Management eventsï¼ˆé»˜è®¤è®°å½•ï¼‰**ï¼šåˆ›å»º/ä¿®æ”¹èµ„æºï¼ˆä¹Ÿèƒ½åˆ† read vs writeï¼‰
- **Data eventsï¼ˆé»˜è®¤ä¸è®°å½•ï¼‰**ï¼šé«˜é¢‘æ•°æ®é¢æ“ä½œ
  - S3 å¯¹è±¡çº§ï¼ˆGetObject/PutObject/DeleteObjectï¼‰
  - Lambda Invoke ç­‰

### 6.2 Insightsï¼ˆå¼‚å¸¸æ£€æµ‹ï¼‰

- åŸºäºæ­£å¸¸æ¨¡å¼å»ºç«‹ baseline
- å‘ç°å¼‚å¸¸å†™æ“ä½œ/çªå‘ IAM è¡Œä¸º/è§¦é¡¶ç­‰
- ç»“æœï¼š
  - æ§åˆ¶å°å¯è§
  - é€ S3
  - **ç”Ÿæˆ EventBridge event**ï¼ˆå¯è‡ªåŠ¨åŒ–ï¼‰

### 6.3 Retentionï¼ˆä¿ç•™æœŸï¼‰

- CloudTrail äº‹ä»¶é»˜è®¤ **90 å¤©**
- è¶…è¿‡ 90 å¤©ï¼š**S3 å­˜å‚¨ + Athena æŸ¥è¯¢**

------

## 7) X-Rayï¼ˆåˆ†å¸ƒå¼è¿½è¸ªï¼‰

- è¿½è¸ªä¸€æ¬¡è¯·æ±‚ç©¿è¿‡å¤šä¸ªæœåŠ¡çš„è·¯å¾„ï¼ˆtraceï¼‰
- ä»·å€¼å…³é”®è¯ï¼š**bottleneckã€dependenciesã€errorsã€SLAã€throttlingã€impacted users**
- CCP åªè¦ä¼šï¼š**ä¸æ˜¯æ—¥å¿—ï¼Œä¸æ˜¯æŒ‡æ ‡ï¼Œæ˜¯ tracing**

------

## 8) CodeGuruï¼ˆè®¤è¯†å³å¯ï¼‰

- **Reviewer**ï¼šé™æ€ä»£ç å®¡æŸ¥ï¼ˆå®‰å…¨/æœ€ä½³å®è·µ/ä½æ•ˆï¼‰ï¼Œæ”¯æŒ Java/Pythonï¼Œé›†æˆ GitHub ç­‰
- **Profiler**ï¼šè¿è¡Œæ—¶æ€§èƒ½å‰–æï¼ˆæ‰¾æœ€è€— CPU çš„ä»£ç è¡Œã€heapã€å¼‚å¸¸æ£€æµ‹ï¼‰ï¼Œå¼€é”€å°

------

## 9) ä¸¤ä¸ªå¥åº·çœ‹æ¿ï¼ˆè€ƒâ€œåŒºåˆ«â€ï¼‰

- **Service Health Dashboard**ï¼šæ‰€æœ‰æœåŠ¡ã€æ‰€æœ‰ Region çš„æ€»ä½“çŠ¶æ€ï¼ˆå…¨å±€ï¼‰
- **Personal Health Dashboard**ï¼šåªå‘Šè¯‰ä½ â€œå“ªäº›äº‹ä»¶å½±å“åˆ°ä½ èµ„æºâ€ï¼Œå¹¶ç»™ remediation å»ºè®®ï¼ˆä¸ªæ€§åŒ–ï¼‰

------

## 10) æœ¬ç«  10 åˆ†é’Ÿé€Ÿè®°å¡ï¼ˆç›´æ¥èƒŒï¼‰

- **CloudWatch**ï¼šMetrics + Alarms + Logs + Dashboards + Events/EventBridge
  - EC2 metrics é»˜è®¤ 5 åˆ†é’Ÿï¼›Detailed 1 åˆ†é’Ÿä»˜è´¹
  - EC2 logs é»˜è®¤ä¸ä¸ŠæŠ¥ â†’ Agent + IAM
  - Billing metricï¼ˆTotal Estimated Chargeï¼‰åªåœ¨ us-east-1
  - Alarm statesï¼šOK / ALARM / INSUFFICIENT_DATA
- **EventBridge**ï¼šCloudWatch Events å‡çº§ç‰ˆï¼›default/partner/custom bus
- **CloudTrail**ï¼šAPI å®¡è®¡ï¼›90 å¤©ï¼›é•¿æœŸ S3+Athenaï¼›Management é»˜è®¤ï¼ŒData é»˜è®¤ä¸è®°å½•ï¼›Insights æ£€æµ‹å¼‚å¸¸
- **X-Ray**ï¼štrace å¾®æœåŠ¡è¯·æ±‚é“¾è·¯ï¼Œæ‰¾ç“¶é¢ˆ/é”™è¯¯
- **Status vs Personal Health**ï¼šå…¨å±€çŠ¶æ€ vs åªå½±å“ä½ 

------

å¦‚æœä½ æƒ³æŠŠè¿™ç« ç»ƒåˆ°â€œçœ‹åˆ°é¢˜å¹²ç§’é€‰â€ï¼Œæˆ‘å¯ä»¥ç»™ä½ å‡º **12 é“ CCP é«˜é¢‘é€‰æ‹©é¢˜**ï¼ˆæ¯é¢˜éƒ½æ ‡å‡ºå…³é”®è¯å’Œé™·é˜±ï¼šCloudWatch vs CloudTrail vs X-Ray vs EventBridgeï¼‰ã€‚